<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pet Scan — Feedback</title>
  <link rel="stylesheet" href="assets/site.css?v=20250920b">
  <script defer data-domain="" src="https://plausible.io/js/script.js"></script>
  <script>
    (function(){
      var u=new URL(location.href);
      var cur=u.searchParams.get('lang')||localStorage.getItem('lang')||'en';
      if(!u.searchParams.get('lang')){ u.searchParams.set('lang',cur); history.replaceState(null,'',u.toString()); }
      document.documentElement.setAttribute('lang', cur);
      localStorage.setItem('lang', cur);
    })();
  </script>
  <script src="i18n.js" defer></script>
  <script src="assets/js/events.js" defer></script>
  <style>
    :root { --maxw: 960px; }
    body { margin:0; line-height:1.45; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto; }
    header, main, footer { max-width: var(--maxw); margin: 0 auto; padding: 16px; }
    nav a { margin-right: 12px; text-decoration: none; }
    .card { border:1px solid #e5e7eb; border-radius:14px; padding:16px; }
    .btn { padding:10px 14px; border-radius:10px; border:1px solid #ddd; display:inline-block; }
    .note { font-size:12px; opacity:.8; }
    label { display:block; margin-top:10px; }
    textarea, select, button { padding:8px; border:1px solid #ccc; border-radius:8px; width:100%; }
  </style>
</head>
<body>
<header>
  <nav aria-label="Main">
    <a href="index.html" data-i18n="nav.home">Home</a>
    <a href="feeding/feeding.html" data-i18n="nav.calculator">Calculator</a>
  </nav>
</header>

<main>
  <h1 data-i18n="feedback.title">Send Feedback</h1>
  <p class="note" data-i18n="legal.data_use">We use anonymous analytics to improve features.</p>

  <form class="card" onsubmit="return false;">
    <label for="fb-type" data-i18n="feedback.type.label">Type</label>
    <select id="fb-type">
      <option value="bug" data-i18n="feedback.type.bug">Bug</option>
      <option value="idea" data-i18n="feedback.type.idea">Idea</option>
      <option value="other" data-i18n="feedback.type.other">Other</option>
    </select>

    <label for="fb-text" data-i18n="feedback.text.label">Your message</label>
    <textarea id="fb-text" rows="6" placeholder="Tell us what happened..." data-i18n-placeholder="feedback.text.placeholder"></textarea>

    <button id="fb-send" class="btn" data-i18n="feedback.send">Send</button>
  </form>
</main>

<footer>
  <p class="note" data-i18n="footer.disclaimer">For diet/medical questions, consult your veterinarian.</p>
</footer>

<script>
  (function(){
    function cur(){ try{ var u=new URL(location.href); return u.searchParams.get('lang')||localStorage.getItem('lang')||'en'; }catch(e){ return 'en'; } }
    // 保留 ?lang
    document.addEventListener('DOMContentLoaded', function(){
      var lang=cur();
      document.querySelectorAll('a[href]').forEach(function(a){
        var href=a.getAttribute('href'); if(!href || href.startsWith('#') || /^https?:\/\//i.test(href)) return;
        var url=new URL(href, location.href); var sp=url.searchParams;
        if(!sp.get('lang')) sp.set('lang', lang); url.search=sp.toString();
        a.setAttribute('href', url.pathname + (url.search?('?'+url.search):'') + url.hash);
      });
    });

    function page(n,p){ if(window.ps&&ps.events&&ps.events.page) ps.events.page(n,p); else if(typeof plausible==='function') plausible('pageview',{props:Object.assign({page_name:n,lang:cur()},p||{})}); }
    function evt(n,p){ if(window.ps&&ps.events&&ps.events.event) ps.events.event(n,p); else if(typeof plausible==='function') plausible(n,{props:Object.assign({lang:cur()},p||{})}); }

    window.addEventListener('DOMContentLoaded', function(){
      page('visit_feedback_page');
      var btn=document.getElementById('fb-send');
      btn.addEventListener('click', function(){
        evt('feedback_open');
        alert('Thanks!');
      });
    });
  })();
</script>
</body>
</html>
