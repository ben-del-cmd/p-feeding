<!doctype html>
<html lang="zh-CN">
<!-- Pet Scan · Feedback · 一键可用（v=20250922c | 自动域名 + 事件上报 | 相对路径版） -->
<head>
  <!-- 基础 -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>意见反馈 · Pet Scan（信息性建议，非医疗）</title>
  <meta name="description" content="提交你对命中率、解释可读性、页面速度与使用体验的反馈；帮助我们改进数据质量与可解释性。" />
  <meta name="robots" content="index,follow" />

  <!-- 性能预取 -->
  <link rel="preconnect" href="https://plausible.io" crossorigin />
  <link rel="dns-prefetch" href="https://plausible.io" />

  <!-- 自动注入 Plausible（使用真实域名，无需手改） -->
  <script>
  (function(){
    var domain = (location && location.hostname) ? location.hostname : 'localhost';
    var s = document.createElement('script');
    s.defer = true;
    s.setAttribute('data-domain', domain);
    s.src = 'https://plausible.io/js/script.js';
    document.head.appendChild(s);
  })();
  </script>

  <!-- 统一事件模块（自动上报 visit_feedback_page / feedback_*） -->
  <script type="module" src="assets/js/events.js?v=20250922c"></script>

  <!-- 样式（极简一致风格） -->
  <style>
    :root{--bg:#0b0d12;--fg:#e5e7eb;--muted:#9ca3af;--card:#111827;--br:16px;--line:#1f2937;--accent:#10b981}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#0b0d12,#0f172a);color:var(--fg);font:15px/1.6 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"PingFang SC","Microsoft Yahei","Noto Sans",sans-serif}
    .wrap{max-width:820px;margin:0 auto;padding:28px}
    a{color:#93c5fd;text-decoration:none}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}
    .logo{display:flex;align-items:center;gap:10px;font-weight:700;font-size:16px;color:#fff;text-decoration:none}
    .logo-badge{width:28px;height:28px;border-radius:8px;background:#10b981;display:inline-grid;place-items:center;color:#0b0d12;font-weight:900}
    .nav a{color:#9ca3af;margin-left:16px}
    .card{background:rgba(17,24,39,.6);border:1px solid rgba(255,255,255,.06);border-radius:var(--br);padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{margin:0 0 8px;font-size:22px}
    .muted{color:#9ca3af;font-size:12px}
    label{display:block;font-size:12px;color:#cbd5e1;margin-bottom:6px}
    input,select,textarea{width:100%;padding:10px;border:1px solid #253046;border-radius:12px;background:#0f172a;color:#e5e7eb}
    .row{display:grid;grid-template-columns:1fr;gap:10px;margin:14px 0}
    .grid2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    .btn{display:inline-block;padding:10px 14px;border-radius:12px;background:var(--accent);color:#0b0d12;font-weight:700;border:0;cursor:pointer}
    .btn.sec{background:#374151;color:#e5e7eb}
    .hint{font-size:12px;color:#94a3b8;margin-top:6px}
    .success{display:none;margin-top:12px;padding:10px;border:1px solid #064e3b;background:#052e2b;color:#86efac;border-radius:12px}
    footer{margin:28px 0 8px;color:#94a3b8;font-size:12px}
    @media (max-width:760px){.grid2{grid-template-columns:1fr}}
  </style>
</head>

<body>
  <div class="wrap" data-page="feedback">
    <header>
      <a class="logo" href="index.html"><span class="logo-badge">PS</span> Pet Scan</a>
      <nav class="nav">
        <a href="index.html">首页</a>
        <a href="feeding.html">喂食计算器</a>
        <a href="cards/transition-7.html?v=20250922c" rel="nofollow">7天换粮卡</a>
      </nav>
    </header>

    <main class="card">
      <h1>意见反馈</h1>
      <p class="muted">谢谢你的帮助！以下反馈仅用于改进命中率、解释可读性与页面性能，不会用于广告定向。</p>

      <!-- 入口按钮：用于埋点 feedback_open -->
      <p><button class="btn sec" id="feedbackOpen" type="button">开始填写</button></p>

      <form id="fbForm" style="margin-top:6px">
        <div class="grid2">
          <div class="row">
            <label>你此次使用的主要功能</label>
            <select id="feature">
              <option value="feeding">喂食计算器</option>
              <option value="transition">7天换粮卡</option>
              <option value="wash">洗护安全雷达</option>
              <option value="scan">扫描/识别</option>
            </select>
          </div>
          <div class="row">
            <label>整体满意度（1-5）</label>
            <select id="rating">
              <option value="5">5 - 很满意</option>
              <option value="4">4</option>
              <option value="3" selected>3 - 一般</option>
              <option value="2">2</option>
              <option value="1">1 - 不满意</option>
            </select>
          </div>
        </div>

        <div class="row">
          <label>请描述问题或建议（可粘贴产品链接/截图链接）</label>
          <textarea id="comment" rows="5" placeholder="例如：某品牌某口味未命中 / 解释不够清晰 / 速度较慢等"></textarea>
          <div class="hint">提示：不要粘贴个人隐私信息。我们只用于改进产品质量。</div>
        </div>

        <div class="grid2">
          <div class="row">
            <label>联系邮箱（可选，用于回复）</label>
            <input id="email" type="email" placeholder="you@example.com" />
          </div>
          <div class="row">
            <label>是否愿意参与后续访谈（可选）</label>
            <select id="interview">
              <option value="no" selected>暂不需要</option>
              <option value="yes">可以</option>
            </select>
          </div>
        </div>

        <div class="row">
          <button class="btn" id="feedbackClick" type="submit">提交反馈</button>
          <a class="btn sec" href="index.html" style="margin-left:8px">返回首页</a>
        </div>

        <div class="success" id="successBox">已收到，谢谢你的宝贵意见！</div>
      </form>

      <p class="hint">埋点事件：visit_feedback_page / feedback_open / feedback_click</p>
    </main>

    <footer>
      <strong>信息性提示：</strong>本工具基于公开信息与通用标准（如 AAFCO/NRC）给出参考建议，不构成医疗或诊断意见。涉及疾病/处方需求请咨询持证兽医。
      <br />数据可能因配方/包装更新而变化；页面已标注来源与时间戳/版本以供核验。
      <br />如含推广链接，可能获得佣金（已披露）；这不影响信息的中立性。
    </footer>
  </div>

  <!-- 轻量提交逻辑（纯前端占位，可替换为你的后端或表单服务） -->
  <script>
  (function(){
    const $ = (id)=> document.getElementById(id);

    // 点击“开始填写” → 触发 feedback_open（由统一事件脚本自动监听该 id）
    $('feedbackOpen').addEventListener('click', () => {
      setTimeout(()=> $('comment').focus(), 50); // 聚焦到文本域，提升填写率
    }, {passive:true});

    // 提交表单 → 触发 feedback_click（由统一事件脚本自动监听该 id）
    $('fbForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const payload = {
        feature: $('feature').value,
        rating: $('rating').value,
        email: $('email').value || null,
        interview: $('interview').value,
        comment: $('comment').value.trim()
      };
      // 最小可用：暂存到 localStorage；有后端时替换为 fetch('/api/feedback', …)
      try { localStorage.setItem('ps_feedback_last', JSON.stringify(payload)); } catch(_) {}
      $('successBox').style.display = 'block';
      $('fbForm').reset();
      $('rating').value = '3';
    });
  })();
  </script>
</body>
</html>
