<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Feedback — Pet Scan</title>
  <link rel="stylesheet" href="assets/site.css" />
  <script defer data-domain="" src="https://plausible.io/js/script.js"></script>
  <style>
    .container{max-width:980px;margin:0 auto;padding:32px 16px;}
    header{display:flex;align-items:center;gap:24px;justify-content:space-between;}
    nav{display:flex;gap:20px;align-items:center;}
    .right{display:flex;align-items:center;gap:12px}
    select#lang-select{min-width:170px}
    .panel{margin-top:18px;padding:18px;border-radius:18px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04)}
    .btn{padding:12px 18px;border-radius:12px;border:none;cursor:pointer}
    .btn-primary{background:#18c08f;color:#062028;font-weight:600}
    .row{display:flex;gap:14px;flex-wrap:wrap;margin:6px 0 14px}
    label.badge{padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.2);cursor:pointer}
    textarea{width:100%;min-height:140px;border-radius:12px;border:1px solid rgba(255,255,255,.16);background:rgba(0,0,0,.25);color:#fff;padding:10px}
  </style>
</head>
<body data-page="feedback.html">
  <div class="container">
    <header>
      <nav>
        <a data-page="index.html">Home</a>
        <a data-page="feeding.html">Calculator</a>
        <a data-page="cards/transition-7.html">7-Day Switch</a>
        <a data-page="feedback.html">Feedback</a>
      </nav>
      <div class="right">
        <select id="lang-select" aria-label="Language">
          <option value="en">English</option>
          <option value="es">Español</option>
          <option value="zh">中文</option>
          <option value="fr">Français</option>
        </select>
      </div>
    </header>

    <h1>Feedback</h1>

    <section class="panel">
      <p>We use anonymous analytics to improve features. Informational only. Not medical advice.</p>

      <div class="row" id="type-row" role="group" aria-label="Feedback type">
        <label class="badge"><input type="radio" name="ftype" value="Bug" checked style="margin-right:6px">Bug</label>
        <label class="badge"><input type="radio" name="ftype" value="Issue/Question" style="margin-right:6px">Issue / Question</label>
        <label class="badge"><input type="radio" name="ftype" value="Feature" style="margin-right:6px">Feature request</label>
        <label class="badge"><input type="radio" name="ftype" value="Other" style="margin-right:6px">Other</label>
      </div>

      <textarea id="msg" placeholder="Describe what’s unclear or missing (screenshots help)."></textarea>

      <div class="row">
        <a class="btn btn-primary" id="send-mail">Send Email</a>
        <a class="btn" data-page="index.html">Back to Home</a>
      </div>
    </section>
  </div>

  <!-- 统一：保留/切换 ?lang + 站内链接（兜底脚本） -->
  <script>
  (function initLinksLang(){
    if (window.__linkInitDone) return; window.__linkInitDone = true;
    const usp = new URLSearchParams(location.search);
    const lang = (usp.get('lang') || 'en').toLowerCase();
    const m = location.pathname.match(/^\/[^/]+\/?/);
    const ROOT = (m ? m[0] : '/').replace(/\/?$/, '/');

    document.querySelectorAll('a[data-page]').forEach(a=>{
      const page = a.getAttribute('data-page');
      a.setAttribute('href', ROOT + page + '?lang=' + lang);
    });

    const sel = document.getElementById('lang-select');
    if (sel){
      if ([...sel.options].some(o=>o.value===lang)) sel.value = lang; else sel.value = 'en';
      sel.addEventListener('change', ()=>{
        const newLang = sel.value || 'en';
        const page = document.body.dataset.page || 'feedback.html';
        location.href = ROOT + page + '?lang=' + newLang;
      });
    }

    // 发送邮件（可替换你的邮箱）
    document.getElementById('send-mail').addEventListener('click', ()=>{
      const type = (document.querySelector('input[name="ftype"]:checked')||{}).value || 'Feedback';
      const body = encodeURIComponent(document.getElementById('msg').value || '');
      const mailto = `mailto:?subject=${encodeURIComponent('Pet Scan ' + type + ' ['+ (sel?.value||'en') +']')}&body=${body}`;
      location.href = mailto;
    });
  })();
  </script>

  <script src="assets/app.js"></script>
</body>
</html>
