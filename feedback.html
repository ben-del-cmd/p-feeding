<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title data-i18n="title.feedback">Feedback</title>
  <link rel="icon" href="/p-feeding/cover.png"/>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,"Apple Color Emoji","Segoe UI Emoji"; margin:0 auto; padding:24px; max-width:960px; line-height:1.6; }
    h1 { font-size:36px; margin:12px 0 18px; }
    .top { display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap; }
    .lang-row { display:flex; gap:10px; flex-wrap:wrap; }
    .pill { padding:8px 14px; border-radius:999px; border:1px solid rgb(120 120 120 / 35%); background:transparent; cursor:pointer; }
    .card { border:1px solid rgb(120 120 120 / 25%); border-radius:14px; padding:16px; margin:20px 0; }
    .row { display:grid; grid-template-columns: 120px 1fr; gap:12px; align-items:center; margin:12px 0; }
    input, select, textarea { padding:10px 12px; border-radius:10px; border:1px solid rgb(120 120 120 / 35%); width:100%; }
    textarea { min-height:220px; resize:vertical; }
    .btn { padding:10px 16px; border-radius:10px; border:1px solid rgb(120 120 120 / 35%); background:transparent; cursor:pointer; font-weight:600;}
    footer { margin-top: 28px; color:#888; font-size:14px; }
  </style>
  <!-- i18n -->
  <script src="/p-feeding/i18n.js?v=20250920b" defer></script>
</head>
<body>
  <div class="top">
    <a href="/p-feeding/" data-i18n="nav.home">Home</a>
    <div class="lang-row">
      <button class="pill" onclick="__setLang('en-US')">English</button>
      <button class="pill" onclick="__setLang('es-419')">Español</button>
      <button class="pill" onclick="__setLang('zh-Hans')">中文(简)</button>
      <button class="pill" onclick="__setLang('fr-CA')">Français (Canada)</button>
    </div>
  </div>

  <h1 data-i18n="h1.feedback">Feedback</h1>

  <div class="card">
    <div class="row">
      <label for="type" data-i18n="form.type">Type</label>
      <select id="type">
        <option value="bug" data-i18n="form.type.bug">Bug</option>
        <option value="feature" data-i18n="form.type.feature">Feature Request</option>
      </select>
    </div>

    <div class="row">
      <label for="summary" data-i18n="form.summary">Summary</label>
      <input id="summary" data-i18n-placeholder="form.summary.ph" placeholder="One-line summary…"/>
    </div>

    <div class="row">
      <label for="details" data-i18n="form.details">Details</label>
      <textarea id="details" data-i18n-placeholder="form.details.ph"
        placeholder="Steps to reproduce, expected result, screenshots/device info…"></textarea>
    </div>

    <div class="row">
      <div></div>
      <button class="btn" id="preview" data-i18n="btn.preview">Preview Draft</button>
    </div>
  </div>

  <footer data-i18n="footer.note.feedback">
    You will be redirected to GitHub to review and submit.
  </footer>

<script>
  // 打开 GitHub 新 issue 草稿页（带预填）
  document.getElementById('preview').addEventListener('click', () => {
    const repo = 'ben-del-cmd/p-feeding';
    const type = document.getElementById('type').value === 'bug' ? '[Bug]' : '[Feature]';
    const title = `${type} ${document.getElementById('summary').value || ''}`.trim();
    const body  = document.getElementById('details').value || '';
    const url = new URL(`https://github.com/${repo}/issues/new`);
    url.searchParams.set('title', title);
    url.searchParams.set('body', body);
    window.open(url.toString(), '_blank');
  });
</script>
</body>
</html>
