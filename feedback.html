<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title data-i18n="title.feedback">Feedback</title>

  <link id="canon" rel="canonical" href="https://ben-del-cmd.github.io/p-feeding/feedback.html?lang=en-US" />
  <meta name="description" content="Report a bug or send a feature request for Pet Feeding Tools." />
  <meta name="robots" content="index,follow" />

  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://ben-del-cmd.github.io/p-feeding/feedback.html" />
  <meta property="og:title" content="Feedback" />
  <meta property="og:description" content="Report a bug or send a feature request for Pet Feeding Tools." />
  <meta property="og:image" content="https://ben-del-cmd.github.io/p-feeding/cover.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Feedback" />
  <meta name="twitter:description" content="Report a bug or send a feature request for Pet Feeding Tools." />
  <meta name="twitter:image" content="https://ben-del-cmd.github.io/p-feeding/cover.png" />

  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feedback.html?lang=en-US" hreflang="en-US" />
  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feedback.html?lang=es-419" hreflang="es-419" />
  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feedback.html?lang=zh-Hans" hreflang="zh-Hans" />
  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feedback.html?lang=fr-CA" hreflang="fr-CA" />
  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feedback.html?lang=en-US" hreflang="x-default" />

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "inLanguage": "en-US",
    "url": "https://ben-del-cmd.github.io/p-feeding/feedback.html",
    "name": "Feedback",
    "description": "Report a bug or send a feature request for Pet Feeding Tools."
  }
  </script>

  <script defer data-domain="ben-del-cmd.github.io" src="https://plausible.io/js/script.js"></script>

  <style>
    :root { color-scheme: light dark; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, PingFang SC, Noto Sans, Helvetica, Arial; margin:0; padding:32px 16px; line-height:1.6; }
    .wrap { max-width: 960px; margin: 0 auto; }
    nav a { margin-right: 16px; }
    .btn { display:inline-block; padding:9px 14px; border-radius:10px; border:1px solid color-mix(in oklab, CanvasText 15%, transparent); text-decoration:none; }
    h1 { font-size: clamp(28px, 5vw, 42px); margin: 16px 0 10px; }
    .card { border: 1px solid color-mix(in oklab, CanvasText 15%, transparent); border-radius: 12px; padding: 20px; margin-top: 16px; }
    label { display:block; margin: 8px 0 6px; }
    input, textarea, select { width:100%; padding:10px 12px; border-radius:10px; border:1px solid color-mix(in oklab, CanvasText 15%, transparent); }
    textarea { min-height: 180px; resize: vertical; }
    .row { margin: 16px 0; }
    .langbar .btn { margin: 6px 8px 0 0; }
    .note { opacity:.8; font-size: 14px; margin-top: 10px; }
  </style>

  <script defer src="/p-feeding/i18n.js?v=20250920b"></script>
</head>
<body>
  <div class="wrap">
    <nav class="row">
      <a class="btn" data-i18n="nav.home" href="/p-feeding/" data-keep-lang="1">Home</a>

      <span class="langbar">
        <a class="btn" onclick="__setLang('en-US')">English</a>
        <a class="btn" onclick="__setLang('es-419')">Español</a>
        <a class="btn" onclick="__setLang('zh-Hans')">中文(简)</a>
        <a class="btn" onclick="__setLang('fr-CA')">Français (Canada)</a>
      </span>
    </nav>

    <h1 data-i18n="h1.feedback">Feedback</h1>

    <section class="card">
      <div class="row">
        <label for="type" data-i18n="form.type">Type</label>
        <select id="type">
          <option data-i18n="form.type.bug" value="bug">Bug</option>
          <option data-i18n="form.type.feature" value="feature">Feature Request</option>
        </select>
      </div>

      <div class="row">
        <label for="sum" data-i18n="form.summary">Summary</label>
        <input id="sum" data-i18n-placeholder="form.summary.ph" placeholder="One-line summary…" />
      </div>

      <div class="row">
        <label for="det" data-i18n="form.details">Details</label>
        <textarea id="det" data-i18n-placeholder="form.details.ph" placeholder="Steps to reproduce, expected result, screenshots/device info…"></textarea>
      </div>

      <div class="row">
        <a class="btn" id="preview" data-i18n="btn.preview" href="#" target="_blank" rel="noopener">Preview Draft</a>
      </div>

      <p class="note" data-i18n="footer.note.feedback">You will be redirected to GitHub to review and submit.</p>
    </section>
  </div>

  <script>
    // Draft -> GitHub issue (opens new tab with prefilled body)
    document.getElementById('preview').addEventListener('click', function (e) {
      e.preventDefault();
      var type = document.getElementById('type').value;
      var sum  = document.getElementById('sum').value.trim() || '(no summary)';
      var det  = document.getElementById('det').value.trim() || '';

      var title = encodeURIComponent('[' + type.toUpperCase() + '] ' + sum);
      var body  = encodeURIComponent(det + '\n\n— via Pet Feeding Tools');

      var url = 'https://github.com/ben-del-cmd/p-feeding/issues/new?title=' + title + '&body=' + body;
      window.open(url, '_blank', 'noopener');
    });

    // Keep current lang on internal links + set canonical
    (function () {
      function currentLang() {
        try { return (window.__i18n_get && __i18n_get().lang) || new URL(location).searchParams.get('lang') || 'en-US'; }
        catch (_) { return 'en-US'; }
      }
      function applyKeepLang() {
        var L = currentLang();
        document.querySelectorAll('a[data-keep-lang="1"]').forEach(function(a){
          try{ var u = new URL(a.getAttribute('href'), location);
               u.searchParams.set('lang', L);
               a.setAttribute('href', u.toString()); }catch(e){}
        });
        try{
          var cu = new URL(location.href);
          if (!cu.searchParams.get('lang')) cu.searchParams.set('lang', L);
          var canon = document.getElementById('canon');
          if (canon) canon.href = cu.toString();
        }catch(e){}
      }
      window.addEventListener('DOMContentLoaded', function(){ setTimeout(applyKeepLang, 0); });
    })();
  </script>
</body>
</html>
