<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pet Scan — Home</title>
<link rel="stylesheet" href="assets/site.css?v=202509" />
<script defer src="i18n.js"></script>
<script defer src="events.js"></script>
</head>
<body>
  <div class="container">
    <nav class="nav">
      <a data-keep-lang href="index.html">Home</a>
      <a data-keep-lang href="feeding.html">Calculator</a>
      <a data-keep-lang href="cards/transition-7.html">7-Day Switch</a>
      <a data-keep-lang href="feedback.html">Feedback</a>
      <div class="spacer"></div>

      <!-- 静态语言 options，英/西/中/法；不依赖脚本插入 -->
      <select id="lang" class="locale-select" aria-label="Language">
        <option value="en">English</option>
        <option value="es">Español</option>
        <option value="zh">中文</option>
        <option value="fr">Français</option>
      </select>
    </nav>

    <header>
      <h1 class="h1">Turn pet food labels into simple, actionable feeding.</h1>
      <p class="muted">Informational only. Not medical advice.</p>
      <p style="margin:18px 0 24px">
        <a class="btn" data-keep-lang href="feeding.html">Open Calculator</a>
        <a class="btn secondary" data-keep-lang href="cards/transition-7.html">View 7-Day Card</a>
        <a class="btn secondary" data-keep-lang href="feedback.html">Feedback</a>
      </p>
    </header>

    <section class="grid-2">
      <div class="card">
        <h3>Calculator</h3>
        <p>RER = 70 × weight^0.75; MER = RER × activity.</p>
      </div>
      <div class="card">
        <h3>7-Day Transition Card</h3>
        <p>90/10 → 0/100</p>
      </div>
      <div class="card">
        <h3>Feedback</h3>
        <p>Anonymous analytics to improve features.</p>
      </div>
    </section>

    <footer>© Pet Scan</footer>
  </div>

<script>
(function() {
  // 读取/设置语言
  const sel = document.getElementById('lang');
  const usp = new URLSearchParams(location.search);
  const lang = (usp.get('lang') || 'en').toLowerCase();
  if ([...sel.options].some(o => o.value === lang)) sel.value = lang;

  sel.addEventListener('change', () => {
    const u = new URL(location.href);
    u.searchParams.set('lang', sel.value);
    location.href = u.pathname + '?' + u.searchParams.toString();
  });

  // 站内链接保留 ?lang
  document.querySelectorAll('a[data-keep-lang]').forEach(a => {
    const u = new URL(a.getAttribute('href'), location.origin);
    u.searchParams.set('lang', sel.value);
    a.setAttribute('href', u.pathname + '?' + u.searchParams.toString());
  });
})();
</script>
</body>
</html>
