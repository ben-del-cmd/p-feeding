<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Feeding — Calculator</title>
  <link rel="stylesheet" href="assets/site.css">
  <style>
    .lang-wrap{display:flex;align-items:center;gap:.5rem}
    .lang-select{min-width:140px;max-width:180px;width:auto;background:rgba(255,255,255,.04);color:#e8eef6;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:.5rem .75rem}
    .lang-select:focus{box-shadow:0 0 0 3px rgba(16,185,129,.35);border-color:rgba(16,185,129,.55)}
    .grid{display:grid;gap:1rem;grid-template-columns:repeat(12,1fr)}
    .col{grid-column:span 12}
    @media(min-width:900px){.col{grid-column:span 6}}
    .panel{padding:1rem;border:1px solid rgba(255,255,255,.08);border-radius:14px;background:rgba(255,255,255,.03)}
  </style>
</head>
<body>
<header class="container">
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="feeding.html">Calculator</a>
    <a href="cards/transition-7.html">7-Day Switch</a>
    <a href="feedback.html">Feedback</a>
    <div class="lang-wrap" style="margin-left:auto">
      <select id="lang" class="lang-select" aria-label="Language"></select>
    </div>
  </nav>
</header>

<main class="container">
  <h1>Feeding Calculator</h1>
  <p>Informational only. Not medical advice.</p>

  <section class="grid panel">
    <div class="col">
      <label>Pet</label>
      <select id="pet" class="input"><option>Dog</option><option>Cat</option></select>
    </div>
    <div class="col">
      <label>Weight</label>
      <input id="weight" class="input" type="number" placeholder="Enter weight">
    </div>
    <div class="col">
      <label>Unit</label>
      <select id="unit" class="input"><option value="kg">kg</option><option value="lb">lb</option></select>
    </div>
    <div class="col">
      <label>Activity</label>
      <select id="activity" class="input">
        <option value="rest">Resting</option>
        <option value="normal">Normal</option>
        <option value="active">Active</option>
      </select>
    </div>

    <div class="col">
      <label>kcal per cup</label>
      <input id="kcal" class="input" type="number" value="350">
    </div>
    <div class="col">
      <label>grams per cup</label>
      <input id="gpc" class="input" type="number" value="110">
    </div>
  </section>

  <div class="actions" style="margin:1rem 0">
    <button id="calc" class="btn">Calculate</button>
    <a class="btn" href="index.html">Back to Home</a>
  </div>

  <section id="result" class="panel" style="display:none"></section>
</main>

<script defer src="i18n.js"></script>
<script>
  // 极简示例计算，你可以替换为自己的完整逻辑
  function toKg(val, unit){ return unit==='lb' ? (val*0.45359237) : val; }
  function rerKg(kg){ return 70 * Math.pow(kg, 0.75); }
  function mer(rer, act){
    const map={rest:1.0, normal:1.4, active:1.8};
    return rer * (map[act] || 1.4);
  }
  document.getElementById('calc').addEventListener('click', ()=>{
    const unit = document.getElementById('unit').value;
    const kg = toKg(parseFloat(document.getElementById('weight').value||0), unit);
    if (!kg){ alert('Enter weight'); return; }

    const outRer = rerKg(kg);
    const outMer = mer(outRer, document.getElementById('activity').value);

    const kcalPerCup = parseFloat(document.getElementById('kcal').value||350);
    const gPerCup = parseFloat(document.getElementById('gpc').value||110);

    const cups = outMer / kcalPerCup;
    const grams = cups * gPerCup;

    const box = document.getElementById('result');
    box.style.display = 'block';
    box.innerHTML = `
      <h3>Result</h3>
      <p><b>RER:</b> ${outRer.toFixed(0)} kcal/day<br>
         <b>MER:</b> ${outMer.toFixed(0)} kcal/day</p>
      <p><b>Daily:</b> ${cups.toFixed(2)} cups ≈ ${grams.toFixed(0)} g</p>
    `;
  });
</script>
</body>
</html>
