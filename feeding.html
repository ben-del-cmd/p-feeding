<!doctype html>
<html lang="zh-CN">
<!-- Pet Scan · Feeding Calculator · 一键可用（v=20250922c | 自动域名 + 事件上报 | 相对路径版） -->
<head>
  <!-- 基础 -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>喂食计算器 · Pet Scan（信息性建议，非医疗）</title>
  <meta name="description" content="根据 RER/MER 与食品能量密度，计算每日建议喂食量（杯/克/罐）；页面显式来源与时间戳（信息性建议，非医疗）。" />
  <meta name="robots" content="index,follow" />

  <!-- 性能预取 -->
  <link rel="preconnect" href="https://plausible.io" crossorigin />
  <link rel="dns-prefetch" href="https://plausible.io" />

  <!-- 自动注入 Plausible（使用真实域名，无需手改） -->
  <script>
  (function(){
    var domain = (location && location.hostname) ? location.hostname : 'localhost';
    var s = document.createElement('script');
    s.defer = true;
    s.setAttribute('data-domain', domain);
    s.src = 'https://plausible.io/js/script.js';
    document.head.appendChild(s);
  })();
  </script>

  <!-- 统一事件模块（自动上报 visit_feeding_page / calc_click） -->
  <script type="module" src="assets/js/events.js?v=20250922c"></script>

  <!-- 样式（极简） -->
  <style>
    :root{--bg:#0b0d12;--fg:#e5e7eb;--muted:#9ca3af;--card:#111827;--br:16px;--line:#1f2937;--accent:#10b981}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#0b0d12,#0f172a);color:var(--fg);font:15px/1.6 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"PingFang SC","Microsoft Yahei","Noto Sans",sans-serif}
    .wrap{max-width:920px;margin:0 auto;padding:28px}
    a{color:#93c5fd;text-decoration:none}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}
    .logo{display:flex;align-items:center;gap:10px;font-weight:700;font-size:16px;color:#fff;text-decoration:none}
    .logo-badge{width:28px;height:28px;border-radius:8px;background:#10b981;display:inline-grid;place-items:center;color:#0b0d12;font-weight:900}
    .nav a{color:#9ca3af;margin-left:16px}
    .card{background:rgba(17,24,39,.6);border:1px solid rgba(255,255,255,.06);border-radius:var(--br);padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{margin:0 0 8px;font-size:22px}
    .muted{color:#9ca3af;font-size:12px}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    .grid2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    label{display:block;font-size:12px;color:#cbd5e1;margin-bottom:6px}
    input,select{width:100%;padding:10px;border:1px solid #253046;border-radius:12px;background:#0f172a;color:#e5e7eb}
    .btn{display:inline-block;padding:10px 14px;border-radius:12px;background:var(--accent);color:#0b0d12;font-weight:700;border:0;cursor:pointer}
    .out{margin-top:14px;border-top:1px dashed #253046;padding-top:12px}
    .row{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #253046}
    .row:last-child{border-bottom:0}
    .kpi{display:inline-block;padding:4px 8px;border-radius:999px;background:#0b1720;color:#86efac;border:1px solid #064e3b;font-size:12px}
    footer{margin:28px 0 8px;color:#94a3b8;font-size:12px}
    @media (max-width:860px){.grid{grid-template-columns:1fr}.grid2{grid-template-columns:1fr}}
  </style>
</head>

<body>
  <div class="wrap" data-page="feeding">
    <header>
      <a class="logo" href="index.html"><span class="logo-badge">PS</span> Pet Scan</a>
      <nav class="nav">
        <a href="index.html">首页</a>
        <a href="feedback.html">反馈</a>
        <a href="cards/transition-7.html?v=20250922c" rel="nofollow">7天换粮卡</a>
      </nav>
    </header>

    <main class="card">
      <h1>喂食计算器</h1>
      <p class="muted">RER = 70 × 体重(kg)<sup>0.75</sup>；MER = RER × 系数（按物种/活动）。输出为<strong>信息性建议</strong>，不代替医疗。</p>

      <!-- 输入区 -->
      <div class="grid" style="margin-top:12px">
        <div>
          <label>物种</label>
          <select id="species">
            <option value="dog" selected>犬</option>
            <option value="cat">猫</option>
          </select>
        </div>
        <div>
          <label>体重（kg）</label>
          <input id="weight" type="number" min="0.5" step="0.1" value="10" />
        </div>
        <div>
          <label>活动系数（MER）</label>
          <select id="mer">
            <option value="1.4">成犬：1.4</option>
            <option value="1.6">成犬：1.6</option>
            <option value="1.0">成猫：1.0</option>
            <option value="1.2">成猫：1.2</option>
          </select>
        </div>
      </div>

      <div class="grid2" style="margin-top:12px">
        <div>
          <label>能量密度（kcal/100g）</label>
          <input id="me100" type="number" min="200" step="1" value="350" />
        </div>
        <div>
          <label>每杯克数（g/cup）</label>
          <input id="gpercup" type="number" min="50" step="1" value="100" />
        </div>
      </div>

      <div style="margin-top:14px">
        <button class="btn" id="calcBtn">计算</button>
        <span class="kpi" id="kcalDayBadge" style="margin-left:10px">kcal/天：—</span>
      </div>

      <!-- 输出区 -->
      <section class="out" id="out">
        <div class="row"><span>推荐热量：</span><strong id="kcalDay">—</strong> kcal/天</div>
        <div class="row"><span>喂食总量（克/天）：</span><strong id="gDay">—</strong> g</div>
        <div class="row"><span>喂食总量（杯/天）：</span><strong id="cupDay">—</strong> 杯</div>
        <div class="row"><span>零食建议上限：</span><strong id="treatsMax">≤ 10%</strong>（按 DER）</div>
        <div class="row"><span>换粮卡：</span><a href="cards/transition-7.html?v=20250922c" class="kpi" rel="nofollow">7天过渡表</a></div>
      </section>

      <p class="muted" style="margin-top:10px">
        口径提示：以 ME（kcal/100g）为基准，杯数按“每杯克数”换算；as-fed / dry matter 的换算与 GA（保证分析）请在结果页查看溯源。
      </p>
    </main>

    <footer>
      <strong>信息性提示：</strong>本工具基于公开信息与通用标准（如 AAFCO/NRC）给出参考建议，不构成医疗或诊断意见。涉及疾病/处方需求请咨询持证兽医。
      <br />数据可能因配方/包装更新而变化；页面已标注来源与时间戳/版本以供核验。
      <br />如含推广链接，可能获得佣金（已披露）；这不影响信息的中立性。
    </footer>
  </div>

  <!-- 计算逻辑（纯前端） -->
  <script>
  (function(){
    const $ = (id)=> document.getElementById(id);
    function calc(){
      const weight = parseFloat($('weight').value || 0);
      const mer = parseFloat($('mer').value || 1.4);
      const me100 = parseFloat($('me100').value || 350);
      const gpercup = parseFloat($('gpercup').value || 100);

      if (weight <= 0 || me100 <= 0 || gpercup <= 0) return;

      const RER = 70 * Math.pow(weight, 0.75);
      const kcalDay = RER * mer;
      const gDay = kcalDay / (me100 / 100);
      const cupsDay = gDay / gpercup;

      $('kcalDayBadge').textContent = 'kcal/天：' + Math.round(kcalDay);
      $('kcalDay').textContent = Math.round(kcalDay);
      $('gDay').textContent = Math.round(gDay);
      $('cupDay').textContent = cupsDay.toFixed(2);

      // 触发 calc_click（若全局 PS 存在）
      try { window.PS && window.PS.track && window.PS.track('calc_click'); } catch(_) {}
    }

    $('calcBtn').addEventListener('click', calc, {passive:true});
    // 初始计算一次便于展示
    calc();
  })();
  </script>
</body>
</html>
