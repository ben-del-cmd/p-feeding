<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title data-i18n="title.feeding">Feeding Calculator</title>

  <link id="canon" rel="canonical" href="https://ben-del-cmd.github.io/p-feeding/feeding.html?lang=en-US" />
  <meta name="description" content="Calculate daily kcal, cups and grams for your pet by weight, unit and activity level." />
  <meta name="robots" content="index,follow" />

  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://ben-del-cmd.github.io/p-feeding/feeding.html" />
  <meta property="og:title" content="Feeding Calculator" />
  <meta property="og:description" content="Calculate daily kcal, cups and grams for your pet by weight, unit and activity level." />
  <meta property="og:image" content="https://ben-del-cmd.github.io/p-feeding/cover.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Feeding Calculator" />
  <meta name="twitter:description" content="Calculate daily kcal, cups and grams for your pet by weight, unit and activity level." />
  <meta name="twitter:image" content="https://ben-del-cmd.github.io/p-feeding/cover.png" />

  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feeding.html?lang=en-US" hreflang="en-US" />
  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feeding.html?lang=es-419" hreflang="es-419" />
  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feeding.html?lang=zh-Hans" hreflang="zh-Hans" />
  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feeding.html?lang=fr-CA" hreflang="fr-CA" />
  <link rel="alternate" href="https://ben-del-cmd.github.io/p-feeding/feeding.html?lang=en-US" hreflang="x-default" />

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "inLanguage": "en-US",
    "url": "https://ben-del-cmd.github.io/p-feeding/feeding.html",
    "name": "Feeding Calculator",
    "description": "Calculate daily kcal, cups and grams for your pet by weight, unit and activity level."
  }
  </script>

  <script defer data-domain="ben-del-cmd.github.io" src="https://plausible.io/js/script.js"></script>

  <style>
    :root { color-scheme: light dark; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, PingFang SC, Noto Sans, Helvetica, Arial; margin:0; padding:32px 16px; line-height:1.6; }
    .wrap { max-width: 960px; margin: 0 auto; }
    h1 { font-size: clamp(28px, 5vw, 42px); margin: 16px 0 10px; }
    nav a { margin-right: 16px; }
    .btn { display:inline-block; padding:9px 14px; border-radius:10px; border:1px solid color-mix(in oklab, CanvasText 15%, transparent); text-decoration:none; }
    .card { border: 1px solid color-mix(in oklab, CanvasText 15%, transparent); border-radius: 12px; padding: 20px; margin-top: 16px; }
    label { display:block; margin: 8px 0 6px; }
    input, select { padding:10px 12px; border-radius:10px; border:1px solid color-mix(in oklab, CanvasText 15%, transparent); }
    .row { margin: 22px 0; }
    .langbar .btn { margin: 6px 8px 0 0; }
    .note { opacity:.8; font-size: 14px; margin-top: 10px; }
  </style>

  <script defer src="/p-feeding/i18n.js?v=20250920b"></script>
</head>
<body>
  <div class="wrap">
    <nav class="row">
      <a class="btn" data-i18n="nav.home" href="/p-feeding/" data-keep-lang="1">Home</a>

      <!-- language buttons -->
      <span class="langbar">
        <a class="btn" onclick="__setLang('en-US')">English</a>
        <a class="btn" onclick="__setLang('es-419')">Español</a>
        <a class="btn" onclick="__setLang('zh-Hans')">中文(简)</a>
        <a class="btn" onclick="__setLang('fr-CA')">Français (Canada)</a>
      </span>
    </nav>

    <h1 data-i18n="h1.feeding">Feeding Calculator</h1>

    <section class="card">
      <div class="row">
        <label data-i18n="feeding.weight" for="w">Weight</label>
        <input id="w" value="10" type="number" step="0.1" />
      </div>

      <div class="row">
        <label data-i18n="feeding.unit" for="u">Unit</label>
        <select id="u">
          <option data-i18n="feeding.kg" value="kg">Kilogram (kg)</option>
          <option data-i18n="feeding.lb" value="lb">Pound (lb)</option>
        </select>
      </div>

      <div class="row">
        <label data-i18n="feeding.activity" for="a">Activity</label>
        <select id="a">
          <option data-i18n="feeding.low" value="low">Low</option>
          <option data-i18n="feeding.mid" value="mid" selected>Medium</option>
          <option data-i18n="feeding.high" value="high">High</option>
        </select>
        <button class="btn" id="go" data-i18n="feeding.calc">Calculate</button>
      </div>

      <div class="row">
        <strong data-i18n="feeding.result">Result</strong>
        <div id="out" style="margin-top:8px">—</div>
      </div>

      <p class="note" data-i18n="footer.note.feeding">Note: For reference only. Consult your vet.</p>
    </section>
  </div>

  <script>
    // Very simple demo calculation (same as before)
    function calc() {
      var w = parseFloat(document.getElementById('w').value || '0');
      var u = document.getElementById('u').value;
      var a = document.getElementById('a').value;

      if (u === 'lb') w = w * 0.45359237; // to kg

      // crude energy formula (RER * factor)
      var RER = 70 * Math.pow(w, 0.75);
      var factor = a === 'low' ? 1.2 : (a === 'high' ? 2.0 : 1.6);
      var kcal = RER * factor;

      // cups/gr: demo constants
      var grams = kcal / 3.6;          // 3.6 kcal/g
      var cups  = grams / 100;         // 100 g per cup (demo)

      var d = (window.__i18n_get && __i18n_get().DICT) ? __i18n_get().DICT : null;
      var lang = (window.__i18n_get && __i18n_get().lang) || 'en-US';

      function t(key, fallback){ try{ return (d && d[lang] && d[lang][key]) || fallback; }catch(e){ return fallback; } }

      document.getElementById('out').innerHTML =
        `${kcal.toFixed(1)} ${t('feeding.kcal.day','kcal/day')}<br>` +
        `${cups.toFixed(1)} ${t('feeding.cup.day','cup/day')}<br>` +
        `${grams.toFixed(1)} ${t('feeding.g.day','g/day')}`;
    }
    document.getElementById('go').addEventListener('click', calc);
    window.addEventListener('DOMContentLoaded', function(){ setTimeout(calc, 0); });

    // Keep current lang on internal links + set canonical
    (function () {
      function currentLang() {
        try { return (window.__i18n_get && __i18n_get().lang) || new URL(location).searchParams.get('lang') || 'en-US'; }
        catch (_) { return 'en-US'; }
      }
      function applyKeepLang() {
        var L = currentLang();
        document.querySelectorAll('a[data-keep-lang="1"]').forEach(function(a){
          try{ var u = new URL(a.getAttribute('href'), location);
               u.searchParams.set('lang', L);
               a.setAttribute('href', u.toString()); }catch(e){}
        });
        try{
          var cu = new URL(location.href);
          if (!cu.searchParams.get('lang')) cu.searchParams.set('lang', L);
          var canon = document.getElementById('canon');
          if (canon) canon.href = cu.toString();
        }catch(e){}
      }
      window.addEventListener('DOMContentLoaded', function(){ setTimeout(applyKeepLang, 0); });
    })();
  </script>
</body>
</html>
