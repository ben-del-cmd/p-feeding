<!doctype html>


<script>
(function(){
function toKg(v, unit){ return unit==='lb' ? v*0.45359237 : v; }
function mer(k){ return 70 * Math.pow(k, 0.75); } // 近似估算
function actCoef(a){ return a==='high'?1.8 : a==='mid'?1.4 : 1.2; }
function format(n){ return Number.isFinite(n) ? (Math.round(n*10)/10).toString() : '-'; }


document.getElementById('go').addEventListener('click', function(){
const lang = document.documentElement.lang || 'en-US';
const w = parseFloat(document.getElementById('w').value);
const unit = document.getElementById('u').value;
const a = document.getElementById('a').value;
if(!(w>0)){
document.getElementById('out').textContent = '';
return;
}
const kg = toKg(w, unit);
const kcal = mer(kg) * actCoef(a);
const cup = kcal / (window.KCAL_PER_CUP||360);
const g = cup * (window.GRAMS_PER_CUP||100);
const tKcal = document.querySelector('[data-i18n="feeding.kcal.day"]').textContent;
const tCup = document.querySelector('[data-i18n="feeding.cup.day"]').textContent;
const tG = document.querySelector('[data-i18n="feeding.g.day"]').textContent;
document.getElementById('out').innerHTML =
'<div>'+ format(kcal) +' '+ tKcal +'</div>'+
'<div>'+ format(cup) +' '+ tCup +'</div>'+
'<div>'+ format(g) +' '+ tG +'</div>';
try{ window.plausible && window.plausible('Calculate', { props: { lang, unit, a } }); }catch(e){}
});


// from index search deeplink demo
if(location.hash.startsWith('#q=')){
const q = decodeURIComponent(location.hash.slice(3));
try{ window.plausible && window.plausible('DeepLink', { props: { q } }); }catch(e){}
}
})();
</script>


<!-- 隐藏文本：用于结果单位的 i18n 读取 -->
<span style="display:none" data-i18n="feeding.kcal.day">kcal/day</span>
<span style="display:none" data-i18n="feeding.cup.day">cup/day</span>
<span style="display:none" data-i18n="feeding.g.day">g/day</span>
</body>
</html>
