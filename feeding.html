<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Feeding Calculator</title>
<link rel="stylesheet" href="../assets/site.css?v=20250923d">
<style>
:root,body{color-scheme:dark}
#ps-lang-select,select{appearance:auto;background:rgba(255,255,255,.04);color:#e7eefc;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:.4rem .7rem}
#ps-lang-select option,select option{background:#0e172a;color:#e7eefc}
#ps-lang-select option:hover,#ps-lang-select option:checked{background:rgba(34,211,163,.22);color:#fff}
/* 两列表单 */
.form-grid{display:grid;grid-template-columns:repeat(2,minmax(260px,1fr));gap:16px}
@media(max-width:820px){.form-grid{grid-template-columns:1fr}}
.field{display:flex;flex-direction:column;gap:8px}
</style>
<script defer data-domain="" src="https://plausible.io/js/script.js"></script>
</head><body>
<header style="display:flex;gap:16px;align-items:center">
  <nav style="display:flex;gap:16px">
    <a href="../index.html">Home</a>
    <a href="feeding.html">Calculator</a>
    <a href="../cards/transition-7.html">7-Day Switch</a>
    <a href="../feedback.html">Feedback</a>
  </nav>
  <select id="ps-lang-select" style="margin-left:auto">
    <option value="en">English</option><option value="es">Español</option>
    <option value="zh">中文</option><option value="fr">Français</option>
  </select>
</header>

<main class="calculator">
  <h1>Feeding Calculator</h1>
  <p class="note">Informational only. Not medical advice.</p>

  <section class="card">
    <div class="form-grid">
      <div class="field"><label>Pet</label>
        <select id="pet"><option value="dog">Dog</option><option value="cat">Cat</option></select>
      </div>
      <div class="field"><label>Weight</label>
        <input id="weight" type="number" min="0" step="0.1" placeholder="Enter weight">
      </div>
      <div class="field"><label>Unit</label>
        <select id="unit"><option value="kg">kg</option><option value="lb">lb</option></select>
      </div>
      <div class="field"><label>Activity</label>
        <select id="activity">
          <option value="resting">Resting</option><option value="normal">Normal</option><option value="active">Active</option>
        </select>
      </div>
      <div class="field"><label>kcal per cup</label><input id="kcal" type="number" min="0" step="1" value="350"></div>
      <div class="field"><label>grams per cup</label><input id="grams" type="number" min="0" step="1" value="110"></div>
    </div>
    <p class="note">RER = 70 × weight^0.75; MER = RER × activity.</p>
    <button class="btn" id="calcBtn">Calculate</button>
  </section>

  <section id="result" class="card" style="display:none">
    <h3>Result</h3><div id="resultText">—</div>
  </section>
</main>

<script src="../i18n.js"></script>
<script src="../assets/js/events.js?v=20250923d"></script>
<script>
document.getElementById('calcBtn').addEventListener('click',()=>{
  const w=parseFloat(document.getElementById('weight').value||'0');
  if(!w||w<=0){alert('Enter weight');return;}
  const unit=document.getElementById('unit').value;
  const act=document.getElementById('activity').value;
  const kg= unit==='lb' ? w*0.45359237 : w;
  const RER=70*Math.pow(kg,0.75);
  const k= (act==='active'?1.8:(act==='normal'?1.4:1.0));
  const MER=RER*k;
  const kcal=+document.getElementById('kcal').value||350;
  const grams=+document.getElementById('grams').value||110;
  const cups=MER/kcal, g= cups*grams;
  document.getElementById('resultText').textContent=`MER ≈ ${MER.toFixed(0)} kcal/day · ${cups.toFixed(2)} cups/day · ${g.toFixed(0)} g/day`;
  document.getElementById('result').style.display='block';
  try{window.plausible&&plausible('calc_click')}catch(e){}
});
// 彻底避免缓存旧脚本
if('serviceWorker' in navigator){
  navigator.serviceWorker.getRegistrations().then(rs=>rs.forEach(r=>r.unregister()));
}
</script>
</body></html>
